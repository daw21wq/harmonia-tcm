<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HarmoniaTCM - Medycyna Chi≈Ñska</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; color: #333;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { 
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px);
            padding: 15px; border-radius: 15px; margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); text-align: center;
        }
        .logo { font-size: 28px; font-weight: bold; color: #4CAF50; margin-bottom: 10px; }
        .subtitle { color: #666; font-size: 16px; }
        .login-section { 
            background: white; padding: 30px; border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1); max-width: 400px; margin: 50px auto;
        }
        .form-group { margin-bottom: 20px; }
        .form-group input { 
            width: 100%; padding: 12px; border: 2px solid #e1e5e9; border-radius: 10px;
            font-size: 16px;
        }
        .btn { 
            width: 100%; padding: 15px; background: #4CAF50; color: white; border: none;
            border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer;
            margin-bottom: 10px;
        }
        .btn:hover { background: #45a049; }
        .app-section { display: none; }
        .nav-menu { 
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px);
            padding: 15px; border-radius: 15px; margin-bottom: 20px;
            display: flex; justify-content: space-around; flex-wrap: wrap;
        }
        .nav-item { 
            background: #4CAF50; color: white; padding: 10px 20px; border-radius: 25px;
            margin: 5px; cursor: pointer; text-decoration: none;
        }
        .nav-item:hover, .nav-item.active { background: #45a049; }
        .content-area { 
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px);
            padding: 30px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }
        .section { display: none; }
        .section.active { display: block; }
        .season-info { 
            background: linear-gradient(135deg, #81C784 0%, #4CAF50 100%);
            color: white; padding: 25px; border-radius: 15px; margin-bottom: 20px; text-align: center;
        }
        .cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .card { 
            background: #f8f9fa; padding: 20px; border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        .card-title { font-size: 18px; font-weight: bold; color: #4CAF50; margin-bottom: 10px; }
        .recipe { 
            background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        .api-box {
            background: #fff3cd; padding: 15px; border-radius: 10px; margin-bottom: 20px;
        }
        .api-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; margin: 10px 0; }
        .btn-small { padding: 8px 16px; font-size: 14px; width: auto; }
        .chat-btn {
            position: fixed; bottom: 20px; right: 20px; background: #4CAF50; color: white;
            width: 60px; height: 60px; border-radius: 50%; border: none; font-size: 24px;
            cursor: pointer; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        .chat-window {
            display: none; position: fixed; bottom: 90px; right: 20px; width: 350px; height: 400px;
            background: white; border-radius: 15px; box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }
        .chat-header { background: #4CAF50; color: white; padding: 15px; border-radius: 15px 15px 0 0; }
        .chat-messages { padding: 15px; height: 250px; overflow-y: auto; }
        .chat-input-area { padding: 15px; border-top: 1px solid #eee; }
        .chat-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 20px; }
        .message { margin-bottom: 15px; padding: 10px 15px; border-radius: 15px; }
        .message.user { background: #4CAF50; color: white; }
        .message.ai { background: #f1f3f4; color: #333; }
        @media (max-width: 768px) {
            .nav-menu { flex-direction: column; align-items: center; }
            .cards { grid-template-columns: 1fr; }
            .chat-window { width: calc(100vw - 40px); }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">üåø HarmoniaTCM</div>
        <div class="subtitle">Sezonowo≈õƒá wed≈Çug Medycyny Chi≈Ñskiej</div>
    </div>

    <!-- Login Section -->
    <div id="loginSection" class="login-section">
        <h2 style="text-align: center; margin-bottom: 30px;">Zaloguj siƒô</h2>
        
        <div class="form-group">
            <input type="email" id="emailInput" placeholder="Email">
        </div>
        
        <div class="form-group">
            <input type="password" id="passwordInput" placeholder="Has≈Ço">
        </div>
        
        <button onclick="doLogin()" class="btn">Zaloguj siƒô</button>
        <button onclick="showRegisterForm()" class="btn" style="background: #2196F3;">Zarejestruj siƒô</button>
        
        <div style="margin-top: 20px; padding: 15px; background: #e8f5e8; border-radius: 10px; font-size: 14px;">
            <strong>Konto demo:</strong><br>
            Email: demo@harmonia.pl<br>
            Has≈Ço: demo123
        </div>
    </div>

    <!-- Register Section -->
    <div id="registerSection" class="login-section" style="display: none;">
        <h2 style="text-align: center; margin-bottom: 30px;">Zarejestruj siƒô</h2>
        
        <div class="form-group">
            <input type="email" id="regEmailInput" placeholder="Email">
        </div>
        
        <div class="form-group">
            <input type="password" id="regPasswordInput" placeholder="Has≈Ço">
        </div>
        
        <button onclick="doRegister()" class="btn">Zarejestruj siƒô</button>
        <button onclick="showLoginForm()" class="btn" style="background: #2196F3;">Powr√≥t do logowania</button>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="app-section">
        <div class="container">
            <div class="nav-menu">
                <div class="nav-item active" onclick="showTab('home')">üè† G≈Ç√≥wna</div>
                <div class="nav-item" onclick="showTab('calendar')">üìÖ Kalendarz</div>
                <div class="nav-item" onclick="showTab('products')">ü•ó Produkty</div>
                <div class="nav-item" onclick="showTab('recipes')">üç≥ Przepisy</div>
                <div class="nav-item" onclick="showTab('profile')">üë§ Profil</div>
                <div class="nav-item" onclick="doLogout()" style="background: #f44336;">üö™ Wyloguj</div>
            </div>

            <div class="content-area">
                <!-- Home Tab -->
                <div id="home" class="section active">
                    <div class="season-info">
                        <h2>üå∏ Wiosna (13 lutego - 25 kwietnia)</h2>
                        <p>WƒÖtroba ‚Ä¢ Pƒôcherzyk ≈ª√≥≈Çciowy ‚Ä¢ ≈ªywio≈Ç Drzewo</p>
                    </div>
                    
                    <div class="cards">
                        <div class="card">
                            <div class="card-title">Zalecenia na dzi≈õ</div>
                            <div>
                                ‚Ä¢ Spo≈ºywaj ≈õwie≈ºe kie≈Çki i m≈Çode warzywa<br>
                                ‚Ä¢ Pij ciep≈ÇƒÖ wodƒô z cytrynƒÖ rano<br>
                                ‚Ä¢ Wykonuj ≈Çagodne ƒáwiczenia rozciƒÖgajƒÖce<br>
                                ‚Ä¢ Unikaj nadmiernie t≈Çustych potraw
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-title">Balans energetyczny</div>
                            <div>
                                <strong>DominujƒÖcy smak:</strong> Kwa≈õny<br>
                                <strong>Termika:</strong> Ciep≈Ça, rozgrzewajƒÖca<br>
                                <strong>Emocje:</strong> Cierpliwo≈õƒá, planowanie<br>
                                <strong>Aktywno≈õƒá:</strong> Umiarkowana
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Calendar Tab -->
                <div id="calendar" class="section">
                    <h2 style="text-align: center; margin-bottom: 30px;">üìÖ Kalendarz TCM</h2>
                    
                    <div class="cards">
                        <div class="card">
                            <div class="card-title">üå± Wiosna (13 luty - 25 kwiecie≈Ñ)</div>
                            <div>
                                <strong>Organy:</strong> WƒÖtroba, Pƒôcherzyk ≈ª√≥≈Çciowy<br>
                                <strong>≈ªywio≈Ç:</strong> Drzewo<br>
                                <strong>Smak:</strong> Kwa≈õny<br>
                                <strong>Charakterystyka:</strong> Czas odnowy i wzrostu
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-title">‚òÄÔ∏è Lato (14 maj - 25 lipiec)</div>
                            <div>
                                <strong>Organy:</strong> Serce, Jelito Cienkie<br>
                                <strong>≈ªywio≈Ç:</strong> Ogie≈Ñ<br>
                                <strong>Smak:</strong> Gorzki<br>
                                <strong>Charakterystyka:</strong> Czas maksymalnej aktywno≈õci
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-title">üçÇ Jesie≈Ñ (13 sierpie≈Ñ - 25 pa≈∫dziernik)</div>
                            <div>
                                <strong>Organy:</strong> P≈Çuca, Jelito Grube<br>
                                <strong>≈ªywio≈Ç:</strong> Metal<br>
                                <strong>Smak:</strong> Ostry<br>
                                <strong>Charakterystyka:</strong> Czas zbior√≥w i przygotowa≈Ñ
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-title">‚ùÑÔ∏è Zima (13 listopad - 25 stycze≈Ñ)</div>
                            <div>
                                <strong>Organy:</strong> Nerki, Pƒôcherz Moczowy<br>
                                <strong>≈ªywio≈Ç:</strong> Woda<br>
                                <strong>Smak:</strong> S≈Çony<br>
                                <strong>Charakterystyka:</strong> Czas regeneracji i oszczƒôdzania energii
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Products Tab -->
                <div id="products" class="section">
                    <h2 style="text-align: center; margin-bottom: 30px;">ü•ó Produkty sezonowe na Wiosnƒô</h2>
                    
                    <div class="cards">
                        <div class="card">
                            <div class="card-title">üå± Kie≈Çki i m≈Çode warzywa</div>
                            <div>
                                <strong>Przyk≈Çady:</strong> Kie≈Çki lucerny, broku≈Ç, rukola<br>
                                <strong>W≈Ça≈õciwo≈õci:</strong> OczyszczajƒÖce, regenerujƒÖce<br>
                                <strong>Wp≈Çyw na organy:</strong> Wspiera wƒÖtrobƒô<br>
                                <strong>Termika:</strong> Ch≈ÇodzƒÖca, ≈õwie≈ºa
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-title">üßÖ Warzywa oczyszczajƒÖce</div>
                            <div>
                                <strong>Przyk≈Çady:</strong> Szczypior, czosnek m≈Çody, cebula<br>
                                <strong>W≈Ça≈õciwo≈õci:</strong> DetoksykujƒÖce, antybakteryjne<br>
                                <strong>Wp≈Çyw na organy:</strong> Oczyszcza wƒÖtrobƒô<br>
                                <strong>Termika:</strong> Ciep≈Ça, stymulujƒÖca
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-title">üçã Produkty kwa≈õne</div>
                            <div>
                                <strong>Przyk≈Çady:</strong> Cytryna, ocet jab≈Çkowy, kwas<br>
                                <strong>W≈Ça≈õciwo≈õci:</strong> WspomagajƒÖce trawienie<br>
                                <strong>Wp≈Çyw na organy:</strong> Harmonizuje wƒÖtrobƒô<br>
                                <strong>Termika:</strong> Neutralna, r√≥wnowa≈ºƒÖca
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recipes Tab -->
                <div id="recipes" class="section">
                    <h2 style="text-align: center; margin-bottom: 30px;">üç≥ Przepisy wiosenne</h2>
                    
                    <div style="text-align: center; margin-bottom: 20px;">
                        <button class="btn btn-small" onclick="generateRecipe()">ü§ñ Generuj przepis AI</button>
                    </div>
                    
                    <div class="recipe">
                        <h3>üå± Wiosenna zupa detoks</h3>
                        <p><strong>Czas:</strong> 30 min ‚Ä¢ <strong>Porcje:</strong> 4 ‚Ä¢ <strong>W≈Ça≈õciwo≈õci:</strong> OczyszczajƒÖce</p>
                        <p>Lekka zupa z m≈Çodych warzyw, pokrzywy i zi√≥≈Ç zgodna z zasadami wiosennego oczyszczania wed≈Çug TCM.</p>
                    </div>
                    
                    <div class="recipe">
                        <h3>ü•ó Sa≈Çatka z kie≈Çkami</h3>
                        <p><strong>Czas:</strong> 15 min ‚Ä¢ <strong>Porcje:</strong> 2 ‚Ä¢ <strong>W≈Ça≈õciwo≈õci:</strong> RegenerujƒÖce</p>
                        <p>≈öwie≈ºa sa≈Çatka z r√≥≈ºnych kie≈Çk√≥w, m≈Çodych li≈õci i dressingiem z octu jab≈Çkowego.</p>
                    </div>
                    
                    <div class="recipe">
                        <h3>üçö Kleik ry≈ºowy z kie≈Çkami</h3>
                        <p><strong>Czas:</strong> 45 min ‚Ä¢ <strong>Porcje:</strong> 2 ‚Ä¢ <strong>W≈Ça≈õciwo≈õci:</strong> ≈ÅagodzƒÖce</p>
                        <p>Tradycyjny chi≈Ñski kleik z dodatkiem ≈õwie≈ºych kie≈Çk√≥w i delikatnych przypraw.</p>
                    </div>
                </div>

                <!-- Profile Tab -->
                <div id="profile" class="section">
                    <h2 style="text-align: center; margin-bottom: 30px;">üë§ Tw√≥j profil TCM</h2>
                    
                    <div class="api-box">
                        <h3>üîë Ustawienia OpenAI API</h3>
                        <p>Wprowad≈∫ sw√≥j klucz API OpenAI aby korzystaƒá z funkcji AI:</p>
                        <input type="password" id="apiKeyInput" class="api-input" placeholder="sk-proj-...">
                        <button onclick="saveApiKey()" class="btn btn-small">Zapisz klucz</button>
                        <div id="apiStatus" style="margin-top: 10px;"></div>
                        <p style="font-size: 12px; color: #666;">
                            Potrzebujesz klucz? <a href="https://platform.openai.com/api-keys" target="_blank">Utw√≥rz tutaj</a>
                        </p>
                    </div>
                    
                    <div class="cards">
                        <div class="card">
                            <div class="card-title">üß¨ Analiza konstytucji</div>
                            <div>
                                <strong>DominujƒÖcy ≈ºywio≈Ç:</strong> Drzewo (60%)<br>
                                <strong>Drugorzƒôdny:</strong> Woda (25%)<br>
                                <strong>Konstytucja:</strong> Typ artysty/kreatora
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-title">üìä Statystyki</div>
                            <div>
                                <strong>Dni u≈ºywania:</strong> <span id="statsdays">1</span><br>
                                <strong>Zapytania AI:</strong> <span id="statsai">0</span><br>
                                <strong>Wygenerowane przepisy:</strong> <span id="statsrecipes">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Chat -->
    <button class="chat-btn" onclick="toggleChat()">ü§ñ</button>
    
    <div id="chatWindow" class="chat-window">
        <div class="chat-header">
            ü§ñ Asystent TCM
            <span style="float: right; cursor: pointer;" onclick="toggleChat()">‚úï</span>
        </div>
        <div id="chatMessages" class="chat-messages">
            <div class="message ai">Cze≈õƒá! Jestem asystentem TCM. Zadaj mi pytanie o medycynƒô chi≈ÑskƒÖ!</div>
        </div>
        <div class="chat-input-area">
            <input type="text" id="chatInputField" class="chat-input" placeholder="Zadaj pytanie..." onkeypress="if(event.key==='Enter') sendMessage()">
            <button onclick="sendMessage()" style="margin-top: 10px; padding: 5px 10px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">Wy≈õlij</button>
        </div>
    </div>

    <script>
        let currentUser = null;
        let chatVisible = false;
        let userStats = { days: 1, ai: 0, recipes: 0 };

        // Load saved data
        window.onload = function() {
            const saved = localStorage.getItem('harmonia_user');
            if (saved) {
                currentUser = JSON.parse(saved);
                showApp();
            }
            loadStats();
        };

        function loadStats() {
            const saved = localStorage.getItem('harmonia_stats');
            if (saved) {
                userStats = JSON.parse(saved);
                updateStats();
            }
        }

        function updateStats() {
            document.getElementById('statsdays').textContent = userStats.days;
            document.getElementById('statsai').textContent = userStats.ai;
            document.getElementById('statsrecipes').textContent = userStats.recipes;
        }

        function saveStats() {
            localStorage.setItem('harmonia_stats', JSON.stringify(userStats));
            updateStats();
        }

        function showLoginForm() {
            document.getElementById('loginSection').style.display = 'block';
            document.getElementById('registerSection').style.display = 'none';
        }

        function showRegisterForm() {
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('registerSection').style.display = 'block';
        }

        function doLogin() {
            const email = document.getElementById('emailInput').value;
            const password = document.getElementById('passwordInput').value;

            if (!email || !password) {
                alert('Wprowad≈∫ email i has≈Ço!');
                return;
            }

            // Demo account
            if (email === 'demo@harmonia.pl' && password === 'demo123') {
                currentUser = { email: email, name: 'Demo User' };
                localStorage.setItem('harmonia_user', JSON.stringify(currentUser));
                showApp();
                return;
            }

            // Check registered users
            const users = JSON.parse(localStorage.getItem('harmonia_users') || '{}');
            if (users[email] && users[email].password === password) {
                currentUser = { email: email, name: users[email].name };
                localStorage.setItem('harmonia_user', JSON.stringify(currentUser));
                showApp();
                return;
            }

            alert('Nieprawid≈Çowy email lub has≈Ço!');
        }

        function doRegister() {
            const email = document.getElementById('regEmailInput').value;
            const password = document.getElementById('regPasswordInput').value;

            if (!email || !password) {
                alert('Wprowad≈∫ email i has≈Ço!');
                return;
            }

            if (password.length < 6) {
                alert('Has≈Ço musi mieƒá co najmniej 6 znak√≥w!');
                return;
            }

            const users = JSON.parse(localStorage.getItem('harmonia_users') || '{}');
            
            if (users[email]) {
                alert('U≈ºytkownik ju≈º istnieje!');
                return;
            }

            users[email] = { password: password, name: email.split('@')[0] };
            localStorage.setItem('harmonia_users', JSON.stringify(users));

            currentUser = { email: email, name: users[email].name };
            localStorage.setItem('harmonia_user', JSON.stringify(currentUser));
            
            alert('Rejestracja udana!');
            showApp();
        }

        function showApp() {
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('registerSection').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
        }

        function doLogout() {
            localStorage.removeItem('harmonia_user');
            currentUser = null;
            location.reload();
        }

        function showTab(tabName) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            
            // Remove active from nav items
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            
            // Show selected section
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function saveApiKey() {
            const key = document.getElementById('apiKeyInput').value;
            if (key && key.startsWith('sk-')) {
                localStorage.setItem('openai_key', key);
                document.getElementById('apiStatus').innerHTML = '<span style="color: green;">‚úì Klucz zapisany!</span>';
            } else {
                document.getElementById('apiStatus').innerHTML = '<span style="color: red;">‚úó Nieprawid≈Çowy klucz!</span>';
            }
        }

        function toggleChat() {
            chatVisible = !chatVisible;
            document.getElementById('chatWindow').style.display = chatVisible ? 'block' : 'none';
        }

        async function sendMessage() {
            const input = document.getElementById('chatInputField');
            const message = input.value.trim();
            if (!message) return;

            // Add user message
            addChatMessage(message, 'user');
            input.value = '';

            // Add loading message
            addChatMessage('My≈õlƒô...', 'ai');

            // Get AI response
            const response = await getAIResponse(message);
            
            // Remove loading message and add real response
            const messages = document.getElementById('chatMessages');
            messages.removeChild(messages.lastChild);
            addChatMessage(response, 'ai');

            // Update stats
            userStats.ai++;
            saveStats();
        }

        function addChatMessage(text, sender) {
            const messages = document.getElementById('chatMessages');
            const msg = document.createElement('div');
            msg.className = `message ${sender}`;
            msg.textContent = text;
            messages.appendChild(msg);
            messages.scrollTop = messages.scrollHeight;
        }

        async function getAIResponse(question) {
            const apiKey = localStorage.getItem('openai_key');
            
            if (!apiKey) {
                return 'Aby korzystaƒá z AI, dodaj klucz API w sekcji Profil. Bez klucza mogƒô tylko powiedzieƒá, ≈ºe TCM to wspania≈Ça medycyna oparta na r√≥wnowadze piƒôciu element√≥w!';
            }

            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [
                            {
                                role: 'system',
                                content: 'Jeste≈õ ekspertem Tradycyjnej Medycyny Chi≈Ñskiej (TCM). Odpowiadaj po polsku, u≈ºywajƒÖc wiedzy o sezonowo≈õci, piƒôciu ≈ºywio≈Çach i kuchni piƒôciu przemian. BƒÖd≈∫ pomocny i praktyczny.'
                            },
                            {
                                role: 'user',
                                content: question
                            }
                        ],
                        max_tokens: 500
                    })
                });

                const data = await response.json();
                return data.choices[0].message.content;
            } catch (error) {
                return 'Przepraszam, wystƒÖpi≈Ç b≈ÇƒÖd po≈ÇƒÖczenia z API. Sprawd≈∫ sw√≥j klucz API i spr√≥buj ponownie.';
            }
        }

        async function generateRecipe() {
            const apiKey = localStorage.getItem('openai_key');
            
            if (!apiKey) {
                alert('Aby korzystaƒá z AI, dodaj klucz API w sekcji Profil!');
                return;
            }

            const prompt = 'Stw√≥rz przepis na wiosennƒÖ potrawƒô zgodnƒÖ z zasadami TCM dla ≈ºywio≈Çu Drzewo, wspierajƒÖcƒÖ wƒÖtrobƒô. Dodaj sk≈Çadniki, spos√≥b przygotowania i w≈Ça≈õciwo≈õci zgodnie z medycynƒÖ chi≈ÑskƒÖ.';
            
            const response = await getAIResponse(prompt);
            
            // Add new recipe
            const recipesSection = document.getElementById('recipes');
            const newRecipe = document.createElement('div');
            newRecipe.className = 'recipe';
            newRecipe.innerHTML = `<h3>ü§ñ Przepis wygenerowany przez AI</h3><div>${response}</div>`;
            recipesSection.appendChild(newRecipe);

            // Update stats
            userStats.recipes++;
            saveStats();
        }
    </script>
</body>
</html>
